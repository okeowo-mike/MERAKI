<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <title>MERAKI</title>
  </head>
  <body>
    <header>
      <div class="main-container">
        <div class="pre-order">
          <div class="s1">
            <h1>Pre-order Now</h1>
            <p>
              Lorem ipsum dolor sit amet consectetur adipisicing elit. Eum ea
              assumenda facilis iure,
            </p>
          </div>

          <div class="s3">
            <form
              action="https://sheetdb.io/api/v1/8pn1lg9ijmesw"
              method="post"
              id="sheetdb-form"
            >
              <label for="name"></label>
              <input
                type="text"
                id="name"
                placeholder="Name"
                name="data[name]"
                required
              />

              <label for="email"></label>
              <input
                type="email"
                id="email"
                placeholder="E-mail"
                name="data[email]"
                required
              />

              <label for="phone"></label>
              <input
                type="tel"
                id="phone"
                placeholder="Phone"
                name="data[phone]"
                required
              />

              <!-- Modernized Product Selection Section -->
              <div class="products-modern">
                <!-- Shirt Selection Card -->
                <div class="product-card">
                  <h3>Shirt</h3>
                  <div class="form-group">
                    <label for="shirt-size">Size</label>
                    <select id="shirt-size">
                      <option value="" disabled selected>Select size</option>
                      <option value="small" data-price="10">Small ($10)</option>
                      <option value="medium" data-price="12">
                        Medium ($12)
                      </option>
                      <option value="large" data-price="15">Large ($15)</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="shirt-qty">Quantity</label>
                    <input type="number" id="shirt-qty" min="1" value="0" />
                  </div>
                  <div class="form-group">
                    <span id="shirt-price">Price: $0</span>
                  </div>
                  <button type="button" id="add-shirt">Add Shirt</button>
                </div>
                <!-- Trousers Selection Card -->
                <div class="product-card">
                  <h3>Trousers</h3>
                  <div class="form-group">
                    <label for="trouser-size">Size</label>
                    <select id="trouser-size">
                      <option value="" disabled selected>Select size</option>
                      <option value="30" data-price="20">Size 30 ($20)</option>
                      <option value="32" data-price="22">Size 32 ($22)</option>
                      <option value="34" data-price="25">Size 34 ($25)</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="trouser-qty">Quantity</label>
                    <input type="number" id="trouser-qty" min="1" value="0" />
                  </div>
                  <div class="form-group">
                    <span id="trouser-price">Price: $0</span>
                  </div>
                  <button type="button" id="add-trouser">Add Trousers</button>
                </div>
              </div>
              <!-- Order Summary Section -->
              <div class="order-summary">
                <h3>Order Summary</h3>
                <ul id="order-list">
                  <!-- Items will be added here dynamically -->
                </ul>
                <div class="form-group">
                  <strong>Total: $<span id="order-total">0</span></strong>
                </div>
              </div>
              <!-- Hidden input to store order summary for form submission -->
              <input
                type="hidden"
                id="order-summary-input"
                name="data[order_summary]"
              />

              <button type="submit">SUBMIT</button>
              <!-- Total Price -->
              <!-- <h3>Total Price: $<span id="totalPrice">0</span></h3> -->
            </form>
          </div>

          <div class="s2">
            <!-- Removed: address, phone, email cards (now in footer) -->
          </div>

          <!-- Removed: .s4 social section (now in footer) -->
        </div>

        <div class="welcome-image">
          <img src="./wallpaper.png" alt="Image" />
          <div class="logo">
            <img src="./Miraki_logo-removebg-preview.png" alt="Logo" />
            <br />
            <svg
              width="340"
              height="80"
              viewBox="0 0 340 71"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M39.12 66.448H36.528L16.464 17.872C15.312 15.184 14.384 12.816 13.68 10.768L12.72 18.064L4.848 70H0.144L11.472 0.783998H14.16L35.568 51.664C36.656 54.032 37.52 56.272 38.16 58.384C38.352 57.68 39.344 55.472 41.136 51.76L65.04 0.783998H67.632L78.096 70H73.296L65.808 17.872C65.296 14.608 65.04 12.144 65.04 10.48C64.976 10.544 64.816 10.864 64.56 11.44C64.368 11.952 63.984 12.848 63.408 14.128C62.896 15.344 62.352 16.624 61.776 17.968L39.12 66.448ZM96.9532 70V1.36H128.825V5.392H101.561V30.64H126.233V34.576H101.561V65.968H129.881V70H96.9532ZM148.328 70V1.648C154.408 1.2 159.496 0.975996 163.592 0.975996C170.12 0.975996 175.496 2.672 179.72 6.064C183.944 9.392 186.056 14.128 186.056 20.272C186.056 24.432 184.84 28.304 182.408 31.888C179.976 35.472 177.256 38.32 174.248 40.432C176.616 43.696 179.528 47.6 182.984 52.144C186.504 56.624 188.776 59.44 189.8 60.592C193.704 64.752 198.12 67.12 203.048 67.696L202.952 70.768C199.048 70.704 195.88 70.128 193.448 69.04C191.016 67.888 188.68 66.16 186.44 63.856C184.264 61.552 178.792 54.384 170.024 42.352C163.752 42.352 158.056 42.16 152.936 41.776V70H148.328ZM167.24 38.512C170.056 38.512 173.064 36.656 176.264 32.944C179.464 29.232 181.064 24.944 181.064 20.08C181.064 15.152 179.4 11.44 176.072 8.944C172.808 6.384 168.456 5.10399 163.016 5.10399C160.136 5.10399 156.776 5.23199 152.936 5.488V38.032C158.056 38.352 162.824 38.512 167.24 38.512ZM215.164 46.192L205.276 70H200.38L229.276 0.879997H231.964L260.956 70H255.772L245.884 46.192H215.164ZM230.332 8.56C230.268 8.62399 230.14 9.008 229.948 9.712C229.052 12.464 228.188 14.8 227.356 16.72L216.796 42.256H244.252L233.692 16.816C231.452 11.952 230.332 9.2 230.332 8.56ZM316.452 1.36L287.268 34.576C291.172 39.248 295.652 44.464 300.708 50.224C305.828 55.984 309.124 59.536 310.596 60.88C312.132 62.224 313.316 63.248 314.148 63.952C315.044 64.592 316.388 65.328 318.18 66.16C319.972 66.928 321.892 67.44 323.94 67.696L323.844 70.768C320.004 70.704 316.836 70.128 314.34 69.04C311.844 67.888 309.668 66.416 307.812 64.624C305.956 62.768 301.892 58.288 295.62 51.184C289.412 44.016 284.74 38.544 281.604 34.768L311.076 1.36H316.452ZM279.78 1.36V70H275.172V1.36H279.78ZM334.703 70V1.36H339.311V70H334.703Z"
                fill="white"
              />
            </svg>
          </div>
        </div>
      </div>
    </header>

    <!--///////////// Modern Product Selection JS -->
    <script>
      // Prices for each product/size
      const prices = {
        shirt: { small: 10, medium: 12, large: 15 },
        trouser: { 30: 20, 32: 22, 34: 25 },
      };

      // Elements for Shirt
      const shirtSize = document.getElementById("shirt-size");
      const shirtQty = document.getElementById("shirt-qty");
      const shirtPrice = document.getElementById("shirt-price");
      const addShirtBtn = document.getElementById("add-shirt");

      // Elements for Trouser
      const trouserSize = document.getElementById("trouser-size");
      const trouserQty = document.getElementById("trouser-qty");
      const trouserPrice = document.getElementById("trouser-price");
      const addTrouserBtn = document.getElementById("add-trouser");

      // Order summary
      const orderList = document.getElementById("order-list");
      const orderTotal = document.getElementById("order-total");
      const orderSummaryInput = document.getElementById("order-summary-input");

      // Store order items
      let orderItems = [];

      // Update price display for shirt
      function updateShirtPrice() {
        const size = shirtSize.value;
        const qty = parseInt(shirtQty.value) || 1;
        if (prices.shirt[size]) {
          shirtPrice.textContent = `Price: $${prices.shirt[size] * qty}`;
        } else {
          shirtPrice.textContent = "Price: $0";
        }
      }
      // Update price display for trouser
      function updateTrouserPrice() {
        const size = trouserSize.value;
        const qty = parseInt(trouserQty.value) || 1;
        if (prices.trouser[size]) {
          trouserPrice.textContent = `Price: $${prices.trouser[size] * qty}`;
        } else {
          trouserPrice.textContent = "Price: $0";
        }
      }
      // Event listeners for price updates
      shirtSize.addEventListener("change", updateShirtPrice);
      shirtQty.addEventListener("input", updateShirtPrice);
      trouserSize.addEventListener("change", updateTrouserPrice);
      trouserQty.addEventListener("input", updateTrouserPrice);

      // Add shirt to order summary
      addShirtBtn.addEventListener("click", function () {
        const size = shirtSize.value;
        const qty = parseInt(shirtQty.value);
        if (!size || !qty || qty < 1) {
          alert("Please select a shirt size and quantity.");
          return;
        }
        const price = prices.shirt[size] * qty;
        orderItems.push({ type: "Shirt", size, qty, price });
        renderOrderList();
      });
      // Add trouser to order summary
      addTrouserBtn.addEventListener("click", function () {
        const size = trouserSize.value;
        const qty = parseInt(trouserQty.value);
        if (!size || !qty || qty < 1) {
          alert("Please select a trouser size and quantity.");
          return;
        }
        const price = prices.trouser[size] * qty;
        orderItems.push({ type: "Trousers", size, qty, price });
        renderOrderList();
      });
      // Render order summary list
      function renderOrderList() {
        orderList.innerHTML = "";
        let total = 0;
        orderItems.forEach((item, idx) => {
          total += item.price;
          const li = document.createElement("li");
          li.innerHTML = `${item.type} - Size: <strong>${item.size}</strong>, Qty: <strong>${item.qty}</strong>, $${item.price} <button class='remove-item-btn' data-idx='${idx}' title='Remove'>&times;</button>`;
          orderList.appendChild(li);
        });
        orderTotal.textContent = total;
        // Store summary as JSON for form submission
        orderSummaryInput.value = JSON.stringify(orderItems);
      }
      // Remove item from order summary
      orderList.addEventListener("click", function (e) {
        if (e.target.classList.contains("remove-item-btn")) {
          const idx = parseInt(e.target.getAttribute("data-idx"));
          orderItems.splice(idx, 1);
          renderOrderList();
        }
      });
      // On form submit, check if at least one item is in the order
      document
        .getElementById("sheetdb-form")
        .addEventListener("submit", function (e) {
          if (orderItems.length === 0) {
            e.preventDefault();
            alert("Please add at least one item to your order.");
          }
        });
      // Initialize price displays
      updateShirtPrice();
      updateTrouserPrice();
    </script>

    <script>
      var form = document.getElementById("sheetdb-form");
      form.addEventListener("submit", (e) => {
        e.preventDefault();
        fetch(form.action, {
          method: "POST",
          body: new FormData(document.getElementById("sheetdb-form")),
        })
          .then((response) => response.json())
          .then((html) => {
            // you can put any JS code here
            window.open("page2.html", "_blank");
          });
      });

      document
        .querySelector(".dropdown-btn")
        .addEventListener("click", function () {
          this.parentElement.classList.toggle("active");
        });

      document.addEventListener("DOMContentLoaded", function () {
        const checkboxes = document.querySelectorAll(".product-checkbox");
        const hiddenInput = document.getElementById("selected-products");
        const form = document.getElementById("sheetdb-form");
        const dropdownBtn = document.querySelector(".dropdown-btn");
        const dropdownContent = document.querySelector(".dropdown-content");

        // Update hidden input when checkboxes change
        checkboxes.forEach((checkbox) => {
          checkbox.addEventListener("change", () => {
            let selected = Array.from(checkboxes)
              .filter((cb) => cb.checked)
              .map((cb) => cb.value)
              .join(", ");
            hiddenInput.value = selected; // Store selected products in hidden input
          });
        });

        // // Toggle dropdown visibility
        // dropdownBtn.addEventListener("click", function () {
        //   dropdownContent.classList.toggle("active");
        // });

        // Submit form and send data to SheetDB
        form.addEventListener("submit", function (e) {
          e.preventDefault();

          if (!hiddenInput.value) {
            alert("Please select at least one product.");
            return; // Stop submission if no product is selected
          }

          fetch(form.action, {
            method: "POST",
            body: new FormData(form),
          })
            .then((response) => response.json())
            .then((html) => {
              // Redirect to the next page after successful submission
              window.open("page2.html", "_blank");
            })
            .catch((error) => console.error("Error:", error));
        });
      });

      // ///////////////////////////////////////////////
      document.addEventListener("DOMContentLoaded", function () {
        const totalPriceEl = document.getElementById("totalPrice");

        const prices = {
          shirt_s: 10,
          shirt_m: 12,
          shirt_l: 15,
          trousers_30: 20,
          trousers_32: 22,
          trousers_34: 25,
        };

        function calculateTotal() {
          let total = 0;
          const formData = new FormData(
            document.getElementById("preOrderForm")
          );

          formData.forEach((value, key) => {
            if (prices[key] && value > 0) {
              total += prices[key] * parseInt(value);
            }
          });

          totalPriceEl.textContent = total;
        }

        document
          .getElementById("preOrderForm")
          .addEventListener("input", calculateTotal);

        document
          .getElementById("preOrderForm")
          .addEventListener("submit", function (e) {
            e.preventDefault();

            const formData = new FormData(this);
            const orderData = {};

            formData.forEach((value, key) => {
              if (value > 0) orderData[key] = value;
            });

            orderData["total_price"] = totalPriceEl.textContent;

            fetch("YOUR_SHEETDB_URL_HERE", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({ data: orderData }),
            })
              .then((response) => response.json())
              .then((data) => {
                alert("Order submitted successfully!");
                window.location.href = "order-summary.html";
              })
              .catch((error) => console.error("Error:", error));
          });
      });
    </script>

<footer class="footer-section">
  <div class="footer-content">
    <div class="s2">
      <div class="address s2-card">
        <h2>ADDRESS</h2>
        <p>
          Lorem ipsum dolor sit amet, consectetur adipisicing elit.
          Praesentium, eos.
        </p>
      </div>
      <div class="phone s2-card">
        <h2>PHONE</h2>
        <p>000 000 0000</p>
      </div>
      <div class="email s2-card">
        <h2>EMAIL</h2>
        <p>jjjj@gmail.com</p>
      </div>
    </div>

    <div class="s4">
      <h2>FOLLOW US HERE</h2>
      <ul>
        <li><a href="#">FACEBOOK</a></li>
        <li><a href="#">TWITTER</a></li>
        <li><a href="#">INSTAGRAM</a></li>
        <li><a href="#">PINTEREST</a></li>
      </ul>
    </div>
  </div>
</footer>


</div>
  </body>
</html>
